{"version":3,"sources":["webpack:///./src/pages/Battle.jsx"],"names":["BattleBegin","props","a","inputOne","refs","value","match","alert","urlOne","setState","loadingOne","axios","get","res","data","total_count","notFoundPlayerOne","setPlayerOne","items","isOne","errorOne","response","errorOneMessage","message","state","isTwo","battle","disabled","inputTwo","urlTwo","loadingTwo","notFoundPlayerTwo","setPlayerTwo","errorTwo","errorTwoMessage","submitOne","className","submitTwo","e","key","getPlayerOne","getPlayerTwo","renderInfoOne","renderInfoTwo","this","playerOne","playerTwo","style","textAlign","marginBottom","lg","md","sm","color","fontSize","icon","faUsers","faFighterJet","faTrophy","animation","name","owner","avatar_url","alt","height","width","onClick","findOneAgain","ref","placeholder","onChange","oneInputChange","onKeyDown","oneEnter","findTwoAgain","twoInputChange","twoEnter","marginTop","to","pathname","search","variant","Component","Battle","oneData","twoData"],"mappings":"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","file":"4.4e30acb2.js","sourcesContent":["import React, { Component } from 'react'\r\nimport axios from \"axios\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport { Container, Row, Col, Button, Spinner } from 'react-bootstrap';\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faUsers, faFighterJet, faTrophy } from \"@fortawesome/free-solid-svg-icons\";\r\n//初始页面\r\nclass BattleBegin extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      isOne: false,\r\n      isTwo: false,\r\n      loadingOne: false,\r\n      loadingTwo: false,\r\n      notFoundPlayerOne: false,\r\n      notFoundPlayerTwo: false,\r\n      errorOne: false,\r\n      errorTwo: false,\r\n      errorOneMessage: \"\",\r\n      errorTwoMessage: \"\",\r\n    };\r\n  }\r\n  //查找Player One\r\n  getPlayerOne = async () => {\r\n    //得到Player One输入框的值\r\n    const inputOne = this.refs.inputOne.value;\r\n    //判断是否为空\r\n    if (inputOne.match(/^[ ]*$/)) {\r\n      alert(\"Player One不能为空！\");\r\n      this.refs.inputOne.value = \"\";\r\n      return;\r\n    }\r\n    //得到Player One的url\r\n    const urlOne = `https://api.github.com/search/repositories?q=${inputOne}`;\r\n    //开始查找\r\n    this.setState({ loadingOne: true });\r\n    try {\r\n      const res = await axios.get(urlOne);\r\n      //判断返回值是否为空\r\n      if (res.data.total_count === 0) {\r\n        this.setState({\r\n          notFoundPlayerOne: true,\r\n        });\r\n        this.refs.inputOne.value = \"\";\r\n        return;\r\n      }\r\n      //返回值不为空，调用Battle里的setPlayerOne函数存值\r\n      this.props.setPlayerOne(res.data.items[0]);\r\n      //标识已找到\r\n      this.setState({ isOne: true, notFoundPlayerOne: false, errorOne: false });\r\n    } catch (e) {\r\n      if (e.response) {\r\n        //console.log(\"getPlayerOne: \", e.response.data.message);\r\n        this.setState({\r\n          errorOne: true,\r\n          errorOneMessage: e.response.data.message,\r\n        });\r\n      }\r\n    }\r\n    this.setState({ loadingOne: false });\r\n    if (this.state.isOne && this.state.isTwo) {\r\n      this.refs.battle.disabled = \"\"\r\n    } else {\r\n      this.refs.battle.disabled = \"disabled\"\r\n    }\r\n  };\r\n  //重新查找Player One\r\n  findOneAgain = () => {\r\n    this.props.setPlayerOne({});\r\n    this.setState({ isOne: false });\r\n    this.refs.battle.disabled = \"disabled\"\r\n  };\r\n  //查找Player Two\r\n  getPlayerTwo = async () => {\r\n    const inputTwo = this.refs.inputTwo.value;\r\n    if (inputTwo.match(/^[ ]*$/)) {\r\n      alert(\"Player Two不能为空！\");\r\n      this.refs.inputTwo.value = \"\";\r\n      return;\r\n    }\r\n    const urlTwo = `https://api.github.com/search/repositories?q=${inputTwo}`;\r\n    this.setState({ loadingTwo: true });\r\n    try {\r\n      const res = await axios.get(urlTwo);\r\n      if (res.data.total_count === 0) {\r\n        this.setState({\r\n          notFoundPlayerTwo: true,\r\n        });\r\n        this.refs.inputTwo.value = \"\";\r\n        return;\r\n      }\r\n      this.props.setPlayerTwo(res.data.items[0]);\r\n      this.setState({ isTwo: true, notFoundPlayerTwo: false, errorTwo: false });\r\n    } catch (e) {\r\n      if (e.response) {\r\n        //console.log(\"getPlayerTwo: \", e.response.data.message);\r\n        this.setState({\r\n          errorTwo: true,\r\n          errorTwoMessage: e.response.data.message,\r\n        });\r\n      }\r\n    }\r\n    this.setState({ loadingTwo: false });\r\n\r\n    if (this.state.isOne && this.state.isTwo) {\r\n      this.refs.battle.disabled = \"\"\r\n    } else {\r\n      this.refs.battle.disabled = \"disabled\"\r\n    }\r\n\r\n  };\r\n  //重新查找player two\r\n  findTwoAgain = () => {\r\n    this.props.setPlayerTwo({});\r\n    this.setState({ isTwo: false });\r\n    this.refs.battle.disabled = \"disabled\";\r\n  };\r\n  //输入框里的值为空时Submit不可点击\r\n  oneInputChange = () => {\r\n    const inputOne = this.refs.inputOne.value;\r\n    if (inputOne.match(/^[ ]*$/)) {\r\n      this.refs.submitOne.className = \"btn-primary disabled\";\r\n      return;\r\n    }\r\n    this.refs.submitOne.className = \"btn-primary\";\r\n  };\r\n  twoInputChange = () => {\r\n    const inputTwo = this.refs.inputTwo.value;\r\n    if (inputTwo.match(/^[ ]*$/)) {\r\n      this.refs.submitTwo.className = \"btn-primary disabled\";\r\n      return;\r\n    }\r\n    this.refs.submitTwo.className = \"btn-primary\";\r\n  };\r\n  //当焦点在Player One的输入框并按下enter键时\r\n  oneEnter = (e) => {\r\n    if (e.key === \"Enter\") {\r\n      this.getPlayerOne();\r\n    }\r\n  };\r\n  //当焦点在Player Two\r\n  twoEnter = (e) => {\r\n    if (e.key === \"Enter\") {\r\n      this.getPlayerTwo();\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { playerOne, playerTwo } = this.props;\r\n    const {\r\n      isOne,\r\n      isTwo,\r\n      loadingOne,\r\n      loadingTwo,\r\n      notFoundPlayerOne,\r\n      notFoundPlayerTwo,\r\n      errorOne,\r\n      errorOneMessage,\r\n      errorTwo,\r\n      errorTwoMessage,\r\n    } = this.state;\r\n    let renderInfoOne;\r\n    let renderInfoTwo;\r\n    if (notFoundPlayerOne) {\r\n      renderInfoOne = (\r\n        <p>\r\n          未找到该用户\r\n        </p>\r\n      );\r\n    } else if (errorOne) {\r\n      renderInfoOne = (\r\n        alert(errorOneMessage)\r\n      );\r\n    }\r\n    if (notFoundPlayerTwo) {\r\n      renderInfoTwo = (\r\n        <p>\r\n          未找到该用户\r\n        </p>\r\n      );\r\n    } else if (errorTwo) {\r\n      renderInfoTwo = (\r\n        alert(errorTwoMessage)\r\n      );\r\n    }\r\n    return (\r\n      <Container className=\"instr\">\r\n        <h1 style={{ textAlign: 'center', marginBottom: 30 }}>Instructions</h1>\r\n        <Row style={{ textAlign: 'center', marginBottom: 30 }}>\r\n          <Col lg={4} md={4} sm={6}>\r\n            <h4>Enter Two Github Users</h4>\r\n            <FontAwesomeIcon style={{ color: '#ffbf74', fontSize: 150 }} icon={faUsers} />\r\n          </Col >\r\n          <Col lg={4} md={4} sm={6}>\r\n            <h4>Battle</h4>\r\n            <FontAwesomeIcon style={{ color: '#b8e2f2', fontSize: 150 }} icon={faFighterJet} />\r\n          </Col>\r\n          <Col lg={4} md={4} sm={6}>\r\n            <h4>See The Winner</h4>\r\n            <FontAwesomeIcon style={{ color: '#ffdf36', fontSize: 150 }} icon={faTrophy} />\r\n          </Col>\r\n        </Row>\r\n        <h1 style={{ textAlign: 'center' }}>Fight</h1>\r\n        <Row style={{ textAlign: 'center' }}>\r\n          <Col lg={6} md={6} sm={12}>\r\n            <h4>Player One</h4>\r\n            {loadingOne ? (\r\n              <div>\r\n                正在查找<Spinner animation=\"border\" />\r\n              </div>\r\n            ) : isOne ? (\r\n              <div style={{}}>\r\n                <div>\r\n                  <span>playerName:{playerOne.name}</span>\r\n                  <div>\r\n                    <img\r\n                      className=\"img-thumbnail lazyload\"\r\n                      data-src={playerOne.owner.avatar_url}\r\n                      alt={playerOne.name}\r\n                      style={{ height: 100, width: 100 }}\r\n                    />\r\n                  </div>\r\n                </div>\r\n                <div style={{ textAlign: 'center' }}>\r\n                  <button\r\n                    className=\"btn-primary\"\r\n                    onClick={this.findOneAgain}>\r\n                    删除\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            ) : (\r\n              <div>\r\n                <input\r\n                  className=\"btn_input\"\r\n                  ref=\"inputOne\"\r\n                  placeholder=\"输入Player One\"\r\n                  onChange={this.oneInputChange}\r\n                  onKeyDown={this.oneEnter}\r\n                ></input>\r\n                <button\r\n                  onClick={this.getPlayerOne}\r\n                  ref=\"submitOne\"\r\n                  className=\"btn-primary disabled\"\r\n                >\r\n                  查找\r\n                </button>\r\n                <div>{renderInfoOne}</div>\r\n              </div>\r\n            )}\r\n\r\n          </Col>\r\n          <Col lg={6} md={6} sm={12}>\r\n            <h4>Player Two</h4>\r\n            {\r\n              loadingTwo ? (\r\n                <div>\r\n                  正在查找<Spinner animation=\"border\" />\r\n                </div>\r\n              ) : isTwo ? (\r\n                <div style={{}}>\r\n                  <div style={{ textAlign: 'center' }}>\r\n                  </div>\r\n                  <span>playerName:{playerTwo.name}</span>\r\n                  <div>\r\n                    <img\r\n                      className=\"img-thumbnail lazyload\"\r\n                      data-src={playerTwo.owner.avatar_url}\r\n                      alt={playerTwo.name}\r\n                      style={{ height: 100, width: 100 }}\r\n                    />\r\n                  </div>\r\n                  <button\r\n                    className=\"btn-primary\"\r\n                    onClick={this.findTwoAgain}>\r\n                    删除\r\n                  </button>\r\n                </div>\r\n              ) : (\r\n                <div style={{}}>\r\n                  <input\r\n                    className=\"btn_input\"\r\n                    ref=\"inputTwo\"\r\n                    placeholder=\"输入Player Two\"\r\n                    onChange={this.twoInputChange}\r\n                    onKeyDown={this.twoEnter}\r\n                  ></input>\r\n                  <button\r\n                    onClick={this.getPlayerTwo}\r\n                    ref=\"submitTwo\"\r\n                    className=\"btn-primary disabled\"\r\n                  >\r\n                    查找\r\n                  </button>\r\n                  <div>{renderInfoTwo}</div>\r\n                </div>\r\n              )\r\n            }\r\n          </Col>\r\n        </Row>\r\n\r\n        <div style={{ textAlign: 'center', marginTop: 50 }}>\r\n\r\n          <NavLink\r\n            to={{\r\n              pathname: `/BattleResult`,\r\n              search: `?user1=${playerOne.name}&user2=${playerTwo.name}`,\r\n              state: {\r\n                playerOne,\r\n                playerTwo,\r\n              },\r\n            }}\r\n          >\r\n            <Button ref=\"battle\" variant=\"primary\" disabled=\"disabled\">Battle</Button>\r\n          </NavLink>\r\n\r\n        </div>\r\n\r\n      </Container>\r\n    );\r\n\r\n  }\r\n}\r\n//Battle\r\nexport default class Battle extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      playerOne: {}, //存储第一个数据\r\n      playerTwo: {}, //存储第二个数据\r\n    };\r\n  }\r\n  //通过参数设置存储第一个数据\r\n  setPlayerOne = (oneData) => {\r\n    this.setState({\r\n      playerOne: oneData,\r\n    });\r\n  };\r\n  setPlayerTwo = (twoData) => {\r\n    this.setState({\r\n      playerTwo: twoData,\r\n    });\r\n  };\r\n  render() {\r\n    const { playerOne, playerTwo } = this.state;\r\n    return (\r\n      <BattleBegin\r\n        setPlayerOne={this.setPlayerOne}\r\n        setPlayerTwo={this.setPlayerTwo}\r\n        playerOne={playerOne}\r\n        playerTwo={playerTwo}\r\n      ></BattleBegin>\r\n\r\n    );\r\n\r\n  }\r\n}"],"sourceRoot":""}